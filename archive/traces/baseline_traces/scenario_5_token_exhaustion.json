{
  "description": "Scenario 5: Token Exhaustion",
  "purpose": "Verify that agents cannot bid/ask after trading all their tokens",
  "setup": {
    "num_buyers": 1,
    "num_sellers": 1,
    "num_times": 3,
    "min_price": 0,
    "max_price": 200,
    "seed": 42
  },
  "agents": [
    {
      "player_id": 1,
      "is_buyer": true,
      "num_tokens": 1,
      "valuations": [100]
    },
    {
      "player_id": 1,
      "is_buyer": false,
      "num_tokens": 1,
      "valuations": [70]
    }
  ],
  "timesteps": [
    {
      "time": 1,
      "actions": {
        "bids": {
          "1": 90
        },
        "asks": {
          "1": 80
        },
        "buyer_accepts": {
          "1": true
        },
        "seller_accepts": {
          "1": false
        }
      },
      "expected_outcomes": {
        "high_bidder": 1,
        "high_bid": 90,
        "low_asker": 1,
        "low_ask": 80,
        "trade_price": 80,
        "buyer_num_trades": 1,
        "seller_num_trades": 1,
        "comment": "Trade occurs. Both agents have now traded their only token."
      }
    },
    {
      "time": 2,
      "actions": {
        "bids": {},
        "asks": {},
        "buyer_accepts": {},
        "seller_accepts": {},
        "nobidask_buyer_1": 1,
        "nobidask_seller_1": 1
      },
      "expected_outcomes": {
        "high_bidder": 0,
        "high_bid": 0,
        "low_asker": 0,
        "low_ask": 0,
        "trade_price": 0,
        "comment": "Both agents have nobidask=1 (exhausted tokens). No new bids/asks possible. Book is cleared from previous trade."
      }
    },
    {
      "time": 3,
      "actions": {
        "bids": {},
        "asks": {},
        "buyer_accepts": {},
        "seller_accepts": {},
        "nobidask_buyer_1": 1,
        "nobidask_seller_1": 1
      },
      "expected_outcomes": {
        "high_bidder": 0,
        "high_bid": 0,
        "low_asker": 0,
        "low_ask": 0,
        "trade_price": 0,
        "comment": "Market continues but no more trading is possible."
      }
    }
  ]
}
